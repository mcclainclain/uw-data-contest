for (i in 1:length(colnames(roster))){
if (length(grep("[hH]ometown", colnames(roster)[i])) > 0){
roster$Hometown = c(roster[colnames(roster)[i]])
}
}
print(roster)
}
}
# Scraping
BASE_URL = "https://mutigers.com"
years = 2013:2023
college_df = data.frame()
for (i in 1:nrow(sports_df)) {
sport = sports_df$Sport[i]
for (y in 1:length(years)) {
year = years[y]
if (sports_df$Type[i] == 1) {
next_year = as.character(years[y] + 1)
year_str = paste(years[y], "-", substr(next_year, nchar(next_year) -1, nchar(next_year)), sep="")
}
else {
year_str = as.character(years[y])
}
url = paste(BASE_URL, "/sports/", sport, "/roster/", year_str, sep="")
tables = read_html(url) %>% html_table()
roster = data.frame(tables[3])
roster$Year = rep(year, nrow(roster))
roster$Sport = rep(sport, nrow(roster))
for (i in 1:length(colnames(roster))){
if (length(grep("[hH]ometown", colnames(roster)[i])) > 0){
roster$Hometown = as.character(c(roster[colnames(roster)[i]]))
}
}
print(roster)
}
}
# Scraping
BASE_URL = "https://mutigers.com"
years = 2013:2023
college_df = data.frame()
for (i in 1:nrow(sports_df)) {
sport = sports_df$Sport[i]
for (y in 1:length(years)) {
year = years[y]
if (sports_df$Type[i] == 1) {
next_year = as.character(years[y] + 1)
year_str = paste(years[y], "-", substr(next_year, nchar(next_year) -1, nchar(next_year)), sep="")
}
else {
year_str = as.character(years[y])
}
url = paste(BASE_URL, "/sports/", sport, "/roster/", year_str, sep="")
tables = read_html(url) %>% html_table()
roster = data.frame(tables[3])
roster$Year = rep(year, nrow(roster))
roster$Sport = rep(sport, nrow(roster))
for (i in 1:length(colnames(roster))){
if (length(grep("[hH]ometown", colnames(roster)[i])) > 0){
roster$Hometown = roster[[colnames(roster)[i]]]
}
}
print(roster)
}
}
hths = "Chesterfield, Mo. / Marquette"
hths
strsplit(hths, "/")
type(strsplit(hths, "/"))
typeof(strsplit(hths, "."))
/
strsplit("Chesterfield, Mo.", "/")
strsplit(hths, "/")[1]
strsplit(hths, "/")[1][1]
[1]
strsplit(hths, "/")
str_split(hths, "/")
str_split1(hths, "/")
str_split_1(hths, ".")
str_split_1(hths, "/")
str_split_1(hths, "/")[1]
str_split_1("Chesterfield, Mo.", "/")
str_trim(str_split_1(hths, "/")[1])
hths = c("Chesterfield, Mo. / Marquette", "Madison, WI. / Edgewood", "Ballwin, Mo. ")
hths
lapply(hths, str_split_1("/"))
library(rvest)
library(tidyverse)
lapply(hths, str_split_1("/"))
lapply(hths, str_split_1(pattern = "/"))
# Helper functions
hometown_split = function(L) {
new_list = c()
for (i in 1:length(L)) {
new_list = c(new_list, str_trim(str_split_1(L[i], "/")))
}
return (new_list)
}
lapply(hths, str_split_1(pattern = "/"))
hths
hometown_split
hometown_split(hths)
# Helper functions
hometown_split = function(L) {
new_list = c()
for (i in 1:length(L)) {
new_list = c(new_list, str_trim(str_split_1(L[i], "/")[1]))
}
return (new_list)
}
hometown_split(hths)
hometown_split(hths)[1]
# Scraping
BASE_URL = "https://mutigers.com"
years = 2013:2023
college_df = data.frame()
for (i in 1:nrow(sports_df)) {
sport = sports_df$Sport[i]
for (y in 1:length(years)) {
year = years[y]
if (sports_df$Type[i] == 1) {
next_year = as.character(years[y] + 1)
year_str = paste(years[y], "-", substr(next_year, nchar(next_year) -1, nchar(next_year)), sep="")
}
else {
year_str = as.character(years[y])
}
url = paste(BASE_URL, "/sports/", sport, "/roster/", year_str, sep="")
tables = read_html(url) %>% html_table()
roster = data.frame(tables[3])
roster$Year = rep(year, nrow(roster))
roster$Sport = rep(sport, nrow(roster))
for (i in 1:length(colnames(roster))){
if (length(grep("[hH]ometown", colnames(roster)[i])) > 0){
roster$Hometown = hometown_split(roster[[colnames(roster)[i]]])
}
}
print(roster)
}
}
library(rvest)
library(tidyverse)
sports = c("baseball",
"softball",
"mens-basketball",
"womens-basketball",
"cross-country",
"football",
"mens-golf",
"womens-golf",
"mens-swimming-and-diving",
"womens-swimming-and-diving",
"womens-gymnastics",
"womens-soccer",
"track-and-field",
"wrestling",
"womens-tennis",
"womens-volleyball")
types = c(0,0,1,1,0,0,1,1,0,0,0,0,0,1,1,0)
sports_df = data.frame(Sport = sports, Type = types)
html = read_html("https://mutigers.com/sports/football/roster/2023")
tbls = html %>% html_table
tbls[3]
# Helper functions
hometown_split = function(L) {
new_list = c()
for (i in 1:length(L)) {
new_list = c(new_list, str_trim(str_split_1(L[i], "/")[1]))
}
return (new_list)
}
# Scraping
BASE_URL = "https://mutigers.com"
years = 2013:2023
college_df = data.frame()
for (i in 1:nrow(sports_df)) {
sport = sports_df$Sport[i]
for (y in 1:length(years)) {
year = years[y]
if (sports_df$Type[i] == 1) {
next_year = as.character(years[y] + 1)
year_str = paste(years[y], "-", substr(next_year, nchar(next_year) -1, nchar(next_year)), sep="")
}
else {
year_str = as.character(years[y])
}
url = paste(BASE_URL, "/sports/", sport, "/roster/", year_str, sep="")
tables = read_html(url) %>% html_table()
roster = data.frame(tables[3])
roster$Year = rep(year, nrow(roster))
roster$Sport = rep(sport, nrow(roster))
for (i in 1:length(colnames(roster))){
if (length(grep("[hH]ometown", colnames(roster)[i])) > 0){
roster$Hometown = hometown_split(roster[[colnames(roster)[i]]])
}
}
print(roster)
}
}
# Scraping
BASE_URL = "https://mutigers.com"
years = 2013:2023
college_df = data.frame()
for (i in 1:nrow(sports_df)) {
sport = sports_df$Sport[i]
for (y in 1:length(years)) {
year = years[y]
if (sports_df$Type[i] == 1) {
next_year = as.character(years[y] + 1)
year_str = paste(years[y], "-", substr(next_year, nchar(next_year) -1, nchar(next_year)), sep="")
}
else {
year_str = as.character(years[y])
}
url = paste(BASE_URL, "/sports/", sport, "/roster/", year_str, sep="")
tables = read_html(url) %>% html_table()
roster = data.frame(tables[3])
roster$Year = rep(year, nrow(roster))
roster$Sport = rep(sport, nrow(roster))
for (i in 1:length(colnames(roster))){
if (length(grep("[hH]ometown", colnames(roster)[i])) > 0){
roster$Hometown = hometown_split(roster[[colnames(roster)[i]]])
}
if (length(grep("[nN]ame", colnames(roster)[i])) > 0){
roster$Name = roster[[colnames(roster)[i]]]
}
}
roster = roster %>% select(Name, Hometown, Year, Sport)
print(roster)
}
}
# Scraping
BASE_URL = "https://mutigers.com"
years = 2013:2023
college_df = data.frame()
for (i in 1:nrow(sports_df)) {
sport = sports_df$Sport[i]
for (y in 1:length(years)) {
year = years[y]
if (sports_df$Type[i] == 1) {
next_year = as.character(years[y] + 1)
year_str = paste(years[y], "-", substr(next_year, nchar(next_year) -1, nchar(next_year)), sep="")
}
else {
year_str = as.character(years[y])
}
url = paste(BASE_URL, "/sports/", sport, "/roster/", year_str, sep="")
tables = read_html(url) %>% html_table()
roster = data.frame(tables[3])
roster$Year = rep(year, nrow(roster))
roster$Sport = rep(sport, nrow(roster))
for (i in 1:length(colnames(roster))){
if (length(grep("[hH]ometown", colnames(roster)[i])) > 0){
roster$Hometown = hometown_split(roster[[colnames(roster)[i]]])
}
if (length(grep("[nN]ame", colnames(roster)[i])) > 0){
roster$Name = roster[[colnames(roster)[i]]]
}
}
# roster = roster %>% select(Name, Hometown, Year, Sport)
print(roster)
}
}
read_html
read_html("https://mutigers.com/sports/baseball/roster/2014") %>% html_tables()
read_html("https://mutigers.com/sports/baseball/roster/2014") %>% html_table()
test = read_html("https://mutigers.com/sports/baseball/roster/2014") %>% html_table()
test[3]
test[4]
test[5]
test
# Scraping
BASE_URL = "https://mutigers.com"
years = 2013:2023
college_df = data.frame()
for (i in 1:nrow(sports_df)) {
sport = sports_df$Sport[i]
for (y in 1:length(years)) {
year = years[y]
if (sports_df$Type[i] == 1) {
next_year = as.character(years[y] + 1)
year_str = paste(years[y], "-", substr(next_year, nchar(next_year) -1, nchar(next_year)), sep="")
}
else {
year_str = as.character(years[y])
}
url = paste(BASE_URL, "/sports/", sport, "/roster/", year_str, sep="")
tables = read_html(url) %>% html_table()
roster = data.frame(tables[3])
roster$Year = rep(year, nrow(roster))
roster$Sport = rep(sport, nrow(roster))
for (i in 1:length(colnames(roster))){
if (length(grep("[hH]ometown", colnames(roster)[i])) > 0){
roster$Hometown = hometown_split(roster[[colnames(roster)[i]]])
}
if (length(grep("[nN]ame", colnames(roster)[i])) > 0){
roster$Name = roster[[colnames(roster)[i]]]
}
}
roster = roster %>% select(Name, Hometown, Year, Sport)
print(roster)
}
}
# Scraping
BASE_URL = "https://mutigers.com"
years = 2013:2023
college_df = data.frame()
for (i in 1:nrow(sports_df)) {
sport = sports_df$Sport[i]
for (y in 1:length(years)) {
year = years[y]
if (sports_df$Type[i] == 1) {
next_year = as.character(years[y] + 1)
year_str = paste(years[y], "-", substr(next_year, nchar(next_year) -1, nchar(next_year)), sep="")
}
else {
year_str = as.character(years[y])
}
url = paste(BASE_URL, "/sports/", sport, "/roster/", year_str, sep="")
tables = read_html(url) %>% html_table()
roster = data.frame(tables[3])
roster$Year = rep(year, nrow(roster))
roster$Sport = rep(sport, nrow(roster))
for (i in 1:length(colnames(roster))){
if (length(grep("[hH]ometown", colnames(roster)[i])) > 0){
roster$Hometown = hometown_split(roster[[colnames(roster)[i]]])
}
if (length(grep("[nN]ame", colnames(roster)[i])) > 0){
roster$Name = roster[[colnames(roster)[i]]]
}
}
if (!("Hometown" %in% colnames(roster)) {
# Scraping
BASE_URL = "https://mutigers.com"
years = 2013:2023
college_df = data.frame()
for (i in 1:nrow(sports_df)) {
sport = sports_df$Sport[i]
for (y in 1:length(years)) {
year = years[y]
if (sports_df$Type[i] == 1) {
next_year = as.character(years[y] + 1)
year_str = paste(years[y], "-", substr(next_year, nchar(next_year) -1, nchar(next_year)), sep="")
}
else {
year_str = as.character(years[y])
}
url = paste(BASE_URL, "/sports/", sport, "/roster/", year_str, sep="")
tables = read_html(url) %>% html_table()
roster = data.frame(tables[3])
roster$Year = rep(year, nrow(roster))
roster$Sport = rep(sport, nrow(roster))
for (i in 1:length(colnames(roster))){
if (length(grep("[hH]ometown", colnames(roster)[i])) > 0){
roster$Hometown = hometown_split(roster[[colnames(roster)[i]]])
}
if (length(grep("[nN]ame", colnames(roster)[i])) > 0){
roster$Name = roster[[colnames(roster)[i]]]
}
}
if (!("Hometown" %in% colnames(roster))) {
next
}
roster = roster %>% select(Name, Hometown, Year, Sport)
print(roster)
}
}
# Scraping
BASE_URL = "https://mutigers.com"
years = 2013:2023
college_df = data.frame()
for (i in 1:nrow(sports_df)) {
sport = sports_df$Sport[i]
for (y in 1:length(years)) {
year = years[y]
if (sports_df$Type[i] == 1) {
next_year = as.character(years[y] + 1)
year_str = paste(years[y], "-", substr(next_year, nchar(next_year) -1, nchar(next_year)), sep="")
}
else {
year_str = as.character(years[y])
}
url = paste(BASE_URL, "/sports/", sport, "/roster/", year_str, sep="")
tables = read_html(url) %>% html_table()
roster = data.frame(tables[3])
roster$Year = rep(year, nrow(roster))
roster$Sport = rep(sport, nrow(roster))
for (i in 1:length(colnames(roster))){
if (length(grep("[hH]ometown", colnames(roster)[i])) > 0){
roster$Hometown = hometown_split(roster[[colnames(roster)[i]]])
}
if (length(grep("[nN]ame", colnames(roster)[i])) > 0){
roster$Name = roster[[colnames(roster)[i]]]
}
}
if (!("Hometown" %in% colnames(roster))) {
next
}
roster = roster %>% select(Name, Hometown, Year, Sport)
college_df = rbind(college_df, roster)
}
print(paste("Finished with ", sport))
}
View(college_df)
write.csv(college_df, row.names=F)
write.csv(college_df, "MIZZOU.csv", row.names=F)
roster$Name = roster[[colnames(roster)[i]]]
source("~/Personal/projects/current/uw-data-contest/mizzou.R", echo=TRUE)
View(college_df)
View(college_df)
library(rvest)
library(tidyverse)
sports = c("baseball",
"softball",
"mens-basketball",
"womens-basketball",
"football",
"mens-golf",
"womens-golf",
"swimming-and-diving",
"womens-gymnastics",
"womens-soccer",
"xctrack",
"womens-tennis",
"mens-tennis",
"womens-volleyball",
"womens-rowing")
len(sports)
length(sports)
library(rvest)
library(tidyverse)
sports = c("baseball",
"softball",
"mens-basketball",
"womens-basketball",
"football",
"mens-golf",
"womens-golf",
"swimming-and-diving",
"womens-gymnastics",
"womens-soccer",
"xctrack",
"womens-tennis",
"mens-tennis",
"womens-volleyball",
"womens-rowing")
types = c(0,0,1,1,0,1,1,1,0,0,1,1,1,0,1)
sports_df = data.frame(Sport = sports, Type = types)
View(sports_dfp)
View(sports_df)
read_html("https://rolltide.com/sports/swimming-and-diving/roster/2023-24")
test = read_html("https://rolltide.com/sports/swimming-and-diving/roster/2023-24") %>% html_table()
test
test[3]
test[4]
rbind(test[3], test[4])
source("~/Personal/projects/current/uw-data-contest/alabama/alabama.R", echo=TRUE)
getwd()
setwd("~/Personal/projects/current/uw-data-contest")
library(rvest)
library(tidyverse)
sports = c("m-basebl",
"w-softbl",
"m-baskbl",
"w-baskbl",
"m-footbl",
"m-golf",
"w-golf",
"w-swim",
"w-gym",
"w-soccer",
"m-track",
"w-track",
"m-xc",
"w-xc",
"w-tennis",
"m-tennis",
"w-volley")
length(sports)
read_html("https://arkansasrazorbacks.com/sport/m-footbl/roster/?season=2021-22")
test = https://arkansasrazorbacks.com/sport/m-footbl/roster/?season=2021-22 %>% html_table()
test = read_html("https://arkansasrazorbacks.com/sport/m-footbl/roster/?season=2021-22") %>% html_table()
test
test = read_html("https://arkansasrazorbacks.com/sport/w-volley/roster/?season=2021-22") %>% html_table()
test
source("~/Personal/projects/current/uw-data-contest/alabama/alabama.R", echo=TRUE)
sports_df = data.frame(Sport = sports, Type = types)
sports_df = data.frame(Sport = sports)
View(sports_df)
source("~/Personal/projects/current/uw-data-contest/alabama/alabama.R", echo=TRUE)
source("~/Personal/projects/current/uw-data-contest/alabama/alabama.R", echo=TRUE)
print(url)
source("~/Personal/projects/current/uw-data-contest/alabama/alabama.R", echo=TRUE)
source("~/Personal/projects/current/uw-data-contest/alabama/alabama.R", echo=TRUE)
source("~/Personal/projects/current/uw-data-contest/alabama/alabama.R", echo=TRUE)
source("~/Personal/projects/current/uw-data-contest/alabama/alabama.R", echo=TRUE)
source("~/Personal/projects/current/uw-data-contest/alabama/alabama.R", echo=TRUE)
source("~/Personal/projects/current/uw-data-contest/alabama/alabama.R", echo=TRUE)
View(college_df)
View(roster)
View(sports_df)
source("~/Personal/projects/current/uw-data-contest/alabama/alabama.R", echo=TRUE)
source("~/Personal/projects/current/uw-data-contest/alabama/alabama.R", echo=TRUE)
source("~/Personal/projects/current/uw-data-contest/alabama/alabama.R", echo=TRUE)
source("~/Personal/projects/current/uw-data-contest/alabama/alabama.R", echo=TRUE)
source("~/Personal/projects/current/uw-data-contest/alabama/alabama.R", echo=TRUE)
source("~/Personal/projects/current/uw-data-contest/alabama/alabama.R", echo=TRUE)
test = read_html("https://arkansasrazorbacks.com/sport/m-basebl/roster/?season=2013-14") %>% html_table()
test
nrow(test[1])
source("~/Personal/projects/current/uw-data-contest/alabama/alabama.R", echo=TRUE)
source("~/Personal/projects/current/uw-data-contest/alabama/alabama.R", echo=TRUE)
source("~/Personal/projects/current/uw-data-contest/alabama/alabama.R", echo=TRUE)
